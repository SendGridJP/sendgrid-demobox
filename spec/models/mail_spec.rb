# encoding: utf-8
require './spec/spec_helper'

describe "Mail" do

  describe "create_new" do
    it "has no attachment file" do
      json = '{"headers":"Received: by mx-004.sjc1.sendgrid.net with SMTP id IrigkvIHKO Thu, 06 Nov 2014 04:30:50 +0000 (GMT)\nReceived: from mo.kke.hdemail.jp (mo.kke.hdemail.jp [54.248.253.38]) by mx-004.sjc1.sendgrid.net (Postfix) with ESMTPS id DC35D10434AC for <demo@demobox.awwa500.bymail.in>; Thu,  6 Nov 2014 04:30:49 +0000 (GMT)\nReceived: by mo.kke.hdemail.jp (hde-mf-postfix, from userid 504) id A54A970004; Thu,  6 Nov 2014 13:30:48 +0900 (JST)\nX-Received: from unknown (HELO mo.kke.hdemail.jp) (127.0.0.1) by 0 with SMTP; 6 Nov 2014 13:30:48 +0900\nX-Received: from mo.kke.hdemail.jp (localhost.localdomain [127.0.0.1]) by mo.kke.hdemail.jp (hde-ma-postfix) with ESMTP id 624F61A000C for <demo@demobox.awwa500.bymail.in>; Thu,  6 Nov 2014 13:30:48 +0900 (JST) (envelope-from wataru@kke.co.jp)\nX-Received: from localhost.localdomain (127.0.0.1) by mo.kke.hdemail.jp (F-Secure/virusgw_smtp/410/mo.kke.hdemail.jp); Thu, 06 Nov 2014 13:30:48 +0900 (JST)\nReceived: from gw20.oz.hdemail.jp (ip-10-169-2-18.ap-northeast-1.compute.internal [10.169.2.18]) by mo.kke.hdemail.jp (hde-mf-postfix) with ESMTP id 5DF7570003 for <demo@demobox.awwa500.bymail.in>; Thu,  6 Nov 2014 13:30:48 +0900 (JST) (envelope-from wataru@kke.co.jp)\nX-Durian-MailFrom: wataru@kke.co.jp\nX-Durian-RcptTo: demo@demobox.awwa500.bymail.in\nReceived: from gw20.oz.hdemail.jp (localhost [127.0.0.1]) by gw20.oz.hdemail.jp (localhost [127.0.0.1]); Thu, 6 Nov 2014 13:30:47 +0900\nX-Received: from mail-pd0-f178.google.com (ip-10-184-3-46.ap-northeast-1.compute.internal [10.184.3.46]) (using TLSv1 with cipher RC4-SHA (128/128 bits)) (No client certificate requested) by gw20.oz.hdemail.jp (Postfix) with ESMTP id C578E148C094 for <demo@demobox.awwa500.bymail.in>; Thu,  6 Nov 2014 13:30:46 +0900 (JST)\nX-Received: by mail-pd0-f178.google.com with SMTP id fp1so362530pdb.9 for <demo@demobox.awwa500.bymail.in>; Wed, 05 Nov 2014 20:30:45 -0800 (PST)\nX-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20130820; h=x-gm-message-state:message-id:date:from:user-agent:mime-version:to :subject:content-type:content-transfer-encoding; bh=3TbqB/9Us/9fbJhuf0zpURRYNSa79hdY27LGlZlAWVY=; b=XCgZAWPWVEQLW8VOO7l/aj5HR2WPaPumHpoHxkn2QHUpfWPvgHM7j6rXd9P1l33Dfe MMcxf2tXZ6H25RMRtRLeNL3acSZ0VeOlEMm3ihahYLbUD2+jU5VGtaEUThn1/I+3ub0+ 619ooRE6AWFtETKozDBjtRWmVIKFz6POREXQGJz70w02erBhU9BiWo+K6AYCjZBSez6n kpi3Z3em26xg85VpwZore6Y4dwfd0084HqIKJMCUaBoNwrFKReVl8V2KNe9D5FMNHTw0 8XJizftHbzSmOGF8CcePVCV3xZBPE33i+Mx7h6Qwt4W6M59NJsyrWp70adrkDc2G9+Vm yYcQ==\nX-Gm-Message-State: ALoCoQlu3CI0evypU45eBg+mXm27kkHDdE34xX8mkCLmDVYLekcCDBe5sJUTvIIGt8JLvsXuwD3tYrb15s+o9XEiLXYIqOenMEtp6+Vwl65rZixt7tLV9vpbsBc0JqfMO8gTMMZxEFVJpIQtCkatsVpIe26Klj8FSAqSjL3XPZRliY9MHOKtD04=\nX-Received: by 10.70.88.44 with SMTP id bd12mr1650599pdb.133.1415248245745; Wed, 05 Nov 2014 20:30:45 -0800 (PST)\nX-Received: by 10.70.88.44 with SMTP id bd12mr1650590pdb.133.1415248245654; Wed, 05 Nov 2014 20:30:45 -0800 (PST)\nX-Received: from smtp.kke.co.jp (gate6.kke.co.jp. [61.122.32.6]) by mx.google.com with ESMTPS id n13sm794541pdj.0.2014.11.05.20.30.45 for <demo@demobox.awwa500.bymail.in> (version=TLSv1.2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128); Wed, 05 Nov 2014 20:30:45 -0800 (PST)\nX-Relaying-Domain: kke.co.jp\nMessage-ID: <545AF973.3020803@kke.co.jp>\nDate: Thu, 06 Nov 2014 13:30:43 +0900\nFrom: Wataru Sato <wataru@kke.co.jp>\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.10; rv:24.0) Gecko/20100101 Thunderbird/24.6.0\nMIME-Version: 1.0\nTo: demo@demobox.awwa500.bymail.in\nSubject: =?ISO-2022-JP?B?GyRCJWEhPCVrPHU/LiVGJTklSBsoQg==?=\nContent-Type: text/plain; charset=ISO-2022-JP\nContent-Transfer-Encoding: 7bit\n","attachments":"0","dkim":"none","subject":"メール受信テスト","to":"demo@demobox.awwa500.bymail.in","from":"Wataru Sato <wataru@kke.co.jp>","text":"\u001b$B%a!<%k<u?.%F%9%H$NK\\\\J8\u001b(B\r\n-- \r\nWataru Sato <wataru@kke.co.jp>\r\n\n","sender_ip":"54.248.253.38","envelope":"{\"to\":[\"demo@demobox.awwa500.bymail.in\"],\"from\":\"wataru@kke.co.jp\"}","charsets":"{\"to\":\"UTF-8\",\"subject\":\"UTF-8\",\"from\":\"UTF-8\",\"text\":\"ISO-2022-JP\"}","SPF":"pass"}'
      hash = JSON.parse(json)
      mail = Mail.create_new(hash)
      expect(mail.headers.length).to eq(27)
      expect(mail.attachments).to eq("0")
      expect(mail.dkim).to eq("none")
      expect(mail.subject).to eq("メール受信テスト")
      expect(mail.to).to eq("demo@demobox.awwa500.bymail.in")
      expect(mail.respond_to?(:attachment_info)).to eq(false)
      expect(mail.from).to eq("Wataru Sato <wataru@kke.co.jp>")
      expect(mail.text).to eq("メール受信テストの本文\r\n-- \r\nWataru Sato <wataru@kke.co.jp>\r\n\n")
      expect(mail.respond_to?(:html)).to eq(false)
      expect(mail.sender_ip).to eq("54.248.253.38")
      expect(mail.envelope["to"]).to eq(["demo@demobox.awwa500.bymail.in"])
      expect(mail.envelope["from"]).to eq("wataru@kke.co.jp")
      expect(mail.charsets["to"]).to eq("UTF-8")
      expect(mail.charsets["subject"]).to eq("UTF-8")
      expect(mail.charsets["from"]).to eq("UTF-8")
      expect(mail.charsets["text"]).to eq("ISO-2022-JP")
      expect(mail.spf).to eq("pass")
    end

    it "has a attachment file" do
      json = '{"headers":"Received: by mx-005.sjc1.sendgrid.net with SMTP id Rj0kWCufvz Thu, 06 Nov 2014 07:48:01 +0000 (GMT)\nReceived: from mo.kke.hdemail.jp (mo.kke.hdemail.jp [54.248.253.38]) by mx-005.sjc1.sendgrid.net (Postfix) with ESMTPS id 74232E80E10 for <demo@demobox.awwa500.bymail.in>; Thu,  6 Nov 2014 07:48:01 +0000 (GMT)\nReceived: by mo.kke.hdemail.jp (hde-mf-postfix, from userid 504) id 5AC2B70006; Thu,  6 Nov 2014 16:48:00 +0900 (JST)\nX-Received: from unknown (HELO mo.kke.hdemail.jp) (127.0.0.1) by 0 with SMTP; 6 Nov 2014 16:48:00 +0900\nX-Received: from mo.kke.hdemail.jp (localhost.localdomain [127.0.0.1]) by mo.kke.hdemail.jp (hde-ma-postfix) with ESMTP id 112541A000C for <demo@demobox.awwa500.bymail.in>; Thu,  6 Nov 2014 16:48:00 +0900 (JST) (envelope-from wataru@kke.co.jp)\nX-Received: from localhost.localdomain (127.0.0.1) by mo.kke.hdemail.jp (F-Secure/virusgw_smtp/410/mo.kke.hdemail.jp); Thu, 06 Nov 2014 16:48:00 +0900 (JST)\nReceived: from gw11.oz.hdemail.jp (ip-10-172-130-211.ap-northeast-1.compute.internal [10.172.130.211]) by mo.kke.hdemail.jp (hde-mf-postfix) with ESMTP id 0CD3570003 for <demo@demobox.awwa500.bymail.in>; Thu,  6 Nov 2014 16:48:00 +0900 (JST) (envelope-from wataru@kke.co.jp)\nX-Durian-MailFrom: wataru@kke.co.jp\nX-Durian-RcptTo: demo@demobox.awwa500.bymail.in\nReceived: from gw11.oz.hdemail.jp (localhost [127.0.0.1]) by gw11.oz.hdemail.jp (localhost [127.0.0.1]); Thu, 6 Nov 2014 16:47:55 +0900\nX-Received: from mail-pa0-f51.google.com (ip-10-184-3-46.ap-northeast-1.compute.internal [10.184.3.46]) (using TLSv1 with cipher RC4-SHA (128/128 bits)) (No client certificate requested) by gw11.oz.hdemail.jp (Postfix) with ESMTP id E9561148C111 for <demo@demobox.awwa500.bymail.in>; Thu,  6 Nov 2014 16:47:54 +0900 (JST)\nX-Received: by mail-pa0-f51.google.com with SMTP id kq14so755277pab.10 for <demo@demobox.awwa500.bymail.in>; Wed, 05 Nov 2014 23:47:53 -0800 (PST)\nX-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20130820; h=x-gm-message-state:message-id:date:from:user-agent:mime-version:to :subject:content-type; bh=eJ7CPy8YNPN+XNhokSGjAPI3AQI9tEPoes8EUSX8xEI=; b=EW7Rg7X3qMgN5tOW4xoIKbWewXxbHg4JHTgesI/0v1cJuwgmVv2UAdvL2JQ2w8xyiY HpezyTRicQ6Q9uas57F+wt65vKYNTOCMUMoYLayWjR35CvZy+ppvv8zomHMJ/uO5rheb tIAQdiKt1TwmiuUVDp/akHyfpReTRUcnoODbTAqdVWruvwm4c7ni1rbL64WmNh+oxrlb CVIeZIX7j1S56k+K62XJOkHU0MvZd878xT4eWXk5oXVV9HvM5wEVgVtdVGJmxMShnUu2 IZR70XtfSsYQ3zJlBeAlwXZwQ9a3FPo3hz8D1X6ynRGPYCwWASnvFevC0047VXiQFRe3 JW+g==\nX-Gm-Message-State: ALoCoQlludSkHABGE86BJrdmtdiQm6VNqWVTvSXt3OlwaPPxazwEnxkh+n9F7kUjtJF1b91Hgf/tikeyQjndUs80CnyNQso7ZYVAefWZvZPEHzDWqzhizgoVoyLhwzaG3WTrO6ICONLzX6YAihor2+I5V9plOp9DnEAtqFLvkUFHZRl/M2DtK7Q=\nX-Received: by 10.70.14.4 with SMTP id l4mr2830239pdc.56.1415260073955; Wed, 05 Nov 2014 23:47:53 -0800 (PST)\nX-Received: by 10.70.14.4 with SMTP id l4mr2830237pdc.56.1415260073890; Wed, 05 Nov 2014 23:47:53 -0800 (PST)\nX-Received: from smtp.kke.co.jp (gate6.kke.co.jp. [61.122.32.6]) by mx.google.com with ESMTPS id j5sm814738pdp.4.2014.11.05.23.47.53 for <demo@demobox.awwa500.bymail.in> (version=TLSv1.2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128); Wed, 05 Nov 2014 23:47:53 -0800 (PST)\nX-Relaying-Domain: kke.co.jp\nMessage-ID: <545B27A7.5070602@kke.co.jp>\nDate: Thu, 06 Nov 2014 16:47:51 +0900\nFrom: Wataru Sato <wataru@kke.co.jp>\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.10; rv:24.0) Gecko/20100101 Thunderbird/24.6.0\nMIME-Version: 1.0\nTo: demo@demobox.awwa500.bymail.in\nSubject: =?ISO-2022-JP?B?GyRCJWEhPCVrPHU/LiVGJTklSBsoQg==?=\nContent-Type: multipart/mixed; boundary=\"------------050909090609030506090201\"\n","attachments":"1","dkim":"none","subject":"メール受信テスト","to":"demo@demobox.awwa500.bymail.in","attachment-info":"{\"attachment1\":{\"filename\":\"こんにちは.zip\",\"name\":\"こんにちは.zip\",\"type\":\"application/x-zip-compressed\"}}","from":"Wataru Sato <wataru@kke.co.jp>","text":"\u001b$B%a!<%k<u?.%F%9%H$NK\\\\J8\u001b(B\r\n-- \r\nWataru Sato <wataru@kke.co.jp>\r\n\n","sender_ip":"54.248.253.38","attachment1":{"filename":"05309306B06106F.zip","type":"application/zip","name":"attachment1","tempfile":"#<File:0x00000101a62d20>","head":"Content-Disposition: form-data; name=\"attachment1\"; filename=\"%3053%3093%306B%3061%306F.zip\"\r\nContent-Type: application/zip\r\n"},"envelope":"{\"to\":[\"demo@demobox.awwa500.bymail.in\"],\"from\":\"wataru@kke.co.jp\"}","charsets":"{\"to\":\"UTF-8\",\"subject\":\"UTF-8\",\"from\":\"UTF-8\",\"text\":\"ISO-2022-JP\"}","SPF":"pass"}'
      hash = JSON.parse(json)
      mail = Mail.create_new(hash)
      expect(mail.headers.length).to eq(26)
      expect(mail.attachments).to eq("1")
      expect(mail.dkim).to eq("none")
      expect(mail.subject).to eq("メール受信テスト")
      expect(mail.to).to eq("demo@demobox.awwa500.bymail.in")
      expect(mail.respond_to?(:attachment_info)).to eq(true)
      expect(mail.from).to eq("Wataru Sato <wataru@kke.co.jp>")
      expect(mail.text).to eq("メール受信テストの本文\r\n-- \r\nWataru Sato <wataru@kke.co.jp>\r\n\n")
      expect(mail.respond_to?(:html)).to eq(false)
      expect(mail.sender_ip).to eq("54.248.253.38")
      expect(mail.envelope["to"]).to eq(["demo@demobox.awwa500.bymail.in"])
      expect(mail.envelope["from"]).to eq("wataru@kke.co.jp")
      expect(mail.charsets["to"]).to eq("UTF-8")
      expect(mail.charsets["subject"]).to eq("UTF-8")
      expect(mail.charsets["from"]).to eq("UTF-8")
      expect(mail.charsets["text"]).to eq("ISO-2022-JP")
      expect(mail.spf).to eq("pass")
    end

    it "has aaa" do
      json = '{"headers":"Received: by mx-005.sjc1.sendgrid.net with SMTP id Rj0kWCufvz Thu, 06 Nov 2014 07:48:01 +0000 (GMT)\nReceived: from mo.kke.hdemail.jp (mo.kke.hdemail.jp [54.248.253.38]) by mx-005.sjc1.sendgrid.net (Postfix) with ESMTPS id 74232E80E10 for <demo@demobox.awwa500.bymail.in>; Thu,  6 Nov 2014 07:48:01 +0000 (GMT)\nReceived: by mo.kke.hdemail.jp (hde-mf-postfix, from userid 504) id 5AC2B70006; Thu,  6 Nov 2014 16:48:00 +0900 (JST)\nX-Received: from unknown (HELO mo.kke.hdemail.jp) (127.0.0.1) by 0 with SMTP; 6 Nov 2014 16:48:00 +0900\nX-Received: from mo.kke.hdemail.jp (localhost.localdomain [127.0.0.1]) by mo.kke.hdemail.jp (hde-ma-postfix) with ESMTP id 112541A000C for <demo@demobox.awwa500.bymail.in>; Thu,  6 Nov 2014 16:48:00 +0900 (JST) (envelope-from wataru@kke.co.jp)\nX-Received: from localhost.localdomain (127.0.0.1) by mo.kke.hdemail.jp (F-Secure/virusgw_smtp/410/mo.kke.hdemail.jp); Thu, 06 Nov 2014 16:48:00 +0900 (JST)\nReceived: from gw11.oz.hdemail.jp (ip-10-172-130-211.ap-northeast-1.compute.internal [10.172.130.211]) by mo.kke.hdemail.jp (hde-mf-postfix) with ESMTP id 0CD3570003 for <demo@demobox.awwa500.bymail.in>; Thu,  6 Nov 2014 16:48:00 +0900 (JST) (envelope-from wataru@kke.co.jp)\nX-Durian-MailFrom: wataru@kke.co.jp\nX-Durian-RcptTo: demo@demobox.awwa500.bymail.in\nReceived: from gw11.oz.hdemail.jp (localhost [127.0.0.1]) by gw11.oz.hdemail.jp (localhost [127.0.0.1]); Thu, 6 Nov 2014 16:47:55 +0900\nX-Received: from mail-pa0-f51.google.com (ip-10-184-3-46.ap-northeast-1.compute.internal [10.184.3.46]) (using TLSv1 with cipher RC4-SHA (128/128 bits)) (No client certificate requested) by gw11.oz.hdemail.jp (Postfix) with ESMTP id E9561148C111 for <demo@demobox.awwa500.bymail.in>; Thu,  6 Nov 2014 16:47:54 +0900 (JST)\nX-Received: by mail-pa0-f51.google.com with SMTP id kq14so755277pab.10 for <demo@demobox.awwa500.bymail.in>; Wed, 05 Nov 2014 23:47:53 -0800 (PST)\nX-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=1e100.net; s=20130820; h=x-gm-message-state:message-id:date:from:user-agent:mime-version:to :subject:content-type; bh=eJ7CPy8YNPN+XNhokSGjAPI3AQI9tEPoes8EUSX8xEI=; b=EW7Rg7X3qMgN5tOW4xoIKbWewXxbHg4JHTgesI/0v1cJuwgmVv2UAdvL2JQ2w8xyiY HpezyTRicQ6Q9uas57F+wt65vKYNTOCMUMoYLayWjR35CvZy+ppvv8zomHMJ/uO5rheb tIAQdiKt1TwmiuUVDp/akHyfpReTRUcnoODbTAqdVWruvwm4c7ni1rbL64WmNh+oxrlb CVIeZIX7j1S56k+K62XJOkHU0MvZd878xT4eWXk5oXVV9HvM5wEVgVtdVGJmxMShnUu2 IZR70XtfSsYQ3zJlBeAlwXZwQ9a3FPo3hz8D1X6ynRGPYCwWASnvFevC0047VXiQFRe3 JW+g==\nX-Gm-Message-State: ALoCoQlludSkHABGE86BJrdmtdiQm6VNqWVTvSXt3OlwaPPxazwEnxkh+n9F7kUjtJF1b91Hgf/tikeyQjndUs80CnyNQso7ZYVAefWZvZPEHzDWqzhizgoVoyLhwzaG3WTrO6ICONLzX6YAihor2+I5V9plOp9DnEAtqFLvkUFHZRl/M2DtK7Q=\nX-Received: by 10.70.14.4 with SMTP id l4mr2830239pdc.56.1415260073955; Wed, 05 Nov 2014 23:47:53 -0800 (PST)\nX-Received: by 10.70.14.4 with SMTP id l4mr2830237pdc.56.1415260073890; Wed, 05 Nov 2014 23:47:53 -0800 (PST)\nX-Received: from smtp.kke.co.jp (gate6.kke.co.jp. [61.122.32.6]) by mx.google.com with ESMTPS id j5sm814738pdp.4.2014.11.05.23.47.53 for <demo@demobox.awwa500.bymail.in> (version=TLSv1.2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128); Wed, 05 Nov 2014 23:47:53 -0800 (PST)\nX-Relaying-Domain: kke.co.jp\nMessage-ID: <545B27A7.5070602@kke.co.jp>\nDate: Thu, 06 Nov 2014 16:47:51 +0900\nFrom: Wataru Sato <wataru@kke.co.jp>\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.10; rv:24.0) Gecko/20100101 Thunderbird/24.6.0\nMIME-Version: 1.0\nTo: demo@demobox.awwa500.bymail.in\nSubject: =?ISO-2022-JP?B?GyRCJWEhPCVrPHU/LiVGJTklSBsoQg==?=\nContent-Type: multipart/mixed; boundary=\"------------050909090609030506090201\"\n","attachments":"1","dkim":"none","subject":"メール受信テスト","to":"demo@demobox.awwa500.bymail.in","attachment-info":"{\"attachment1\":{\"filename\":\"こんにちは.zip\",\"name\":\"こんにちは.zip\",\"type\":\"application/x-zip-compressed\"}}","from":"Wataru Sato <wataru@kke.co.jp>","text":"\u001b$B%a!<%k<u?.%F%9%H$NK\\\\J8\u001b(B\r\n-- \r\nWataru Sato <wataru@kke.co.jp>\r\n\n","sender_ip":"54.248.253.38","attachment1":{"filename":"05309306B06106F.zip","type":"application/zip","name":"attachment1","tempfile":"#<File:0x00000101a62d20>","head":"Content-Disposition: form-data; name=\"attachment1\"; filename=\"%3053%3093%306B%3061%306F.zip\"\r\nContent-Type: application/zip\r\n"},"envelope":"{\"to\":[\"demo@demobox.awwa500.bymail.in\"],\"from\":\"wataru@kke.co.jp\"}","charsets":"{\"to\":\"UTF-8\",\"subject\":\"UTF-8\",\"from\":\"UTF-8\",\"text\":\"ISO-2022-JP\"}","SPF":"pass"}'
      hash = JSON.parse(json)
      mail = Mail.create_new(hash)
      hash = mail.to_array
      expect(hash["headers"].length).to eq(26)
      expect(hash["attachments"]).to eq("1")
      expect(hash["dkim"]).to eq("none")
      expect(hash["subject"]).to eq("メール受信テスト")
      expect(hash["to"]).to eq("demo@demobox.awwa500.bymail.in")
      expect(hash.key?("attachment_info")).to eq(true)
      expect(hash["from"]).to eq("Wataru Sato <wataru@kke.co.jp>")
      expect(hash["text"]).to eq("メール受信テストの本文\r\n-- \r\nWataru Sato <wataru@kke.co.jp>\r\n\n")
      expect(hash.key?("html")).to eq(false)
      expect(hash["sender_ip"]).to eq("54.248.253.38")
      expect(hash["envelope"]["to"]).to eq(["demo@demobox.awwa500.bymail.in"])
      expect(hash["envelope"]["from"]).to eq("wataru@kke.co.jp")
      expect(hash["charsets"]["to"]).to eq("UTF-8")
      expect(hash["charsets"]["subject"]).to eq("UTF-8")
      expect(hash["charsets"]["from"]).to eq("UTF-8")
      expect(hash["charsets"]["text"]).to eq("ISO-2022-JP")
      expect(hash["spf"]).to eq("pass")
    end
  end
end
